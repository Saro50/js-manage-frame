/*! MKP 2013-10-08  */
var $={};$.MKP||($.MKP={}),$.MKP.getAgent=function(){var a=global.navigator,b=["Chrome","MSIE","Firefox","Opera","Safari"],c=["Google"],d="",e="",f=function(a,b){for(var c=b.length,d=-1;c>0&&-1===(d=a.indexOf(b[--c])););return{index:d,position:c}},g=function(b){var c=a.userAgent,d=c.indexOf(b),e=c.substring(d),f=/(\d+([.]\d+)*)/;return f.test(e)?RegExp.$1:null},h=f(a.vendor?a.vendor:"",c);if(-1!==h.index)d=b[h.position],e=g(d);else{var i=f(a.userAgent,b);d=b[i.position],e=g(d)}return function(){return{name:d,version:e}}}(),$.MKP.templateParser=function(a,b,c){var d=c||"#",e=a;if("object"!=typeof b)return 1;for(var f in b){var g=new RegExp(d+f+d);if(b.hasOwnProperty(f))for(;e.match(g);)e=e.replace(g,b[f])}return e},$.MKP._base=function(){this.totals=[],this.render=function(a){var b=this.template;return this.content=$.MKP.templateParser(b,a),this},this.valueOf=function(){return this.value},this.toString=function(){return this.string},this.setHandle=function(a){return this.handle=a,this},this.setTemplate=function(a){return this.template=a,this},this.destroy=function(){for(var a=this.totals,b=a.length;b>0;)this._id===a[--b]._id&&a.splice(b,1);this.$el.remove()},this._pro=this},function(a){return a||alert("Jquery is needed!"),a.MKP?(a.MKP._select=function(){var b=" mkp_s_selected",c="mkp_s_option",d="mkp_s_wrap",e=0,f=function(){this.totals.push(this)};return f.prototype=new a.MKP._base,function(g){var h=this,i=0,j=function(){var b=function(){var a=h.$wrap;1==++i?a.show():(a.hide(),i=0)};return function(c){var c=c||window.event,d=c.target||c.srcElement,e=d.getAttribute("data-id");e&&(h.$first.html(d.innerHTML),a.each(h.options,function(){this.className=""}),h.selected={id:e,value:d.getAttribute("data-value"),text:d.innerHTML},d.className=h.df_class.selectedClass,h.handle.click&&h.handle.click.apply(d,[c])),b()}}(),k=function(){var b=0,c=function(){h.$wrap.hide(),i=0,b=0,a(document).unbind("click",c)};return function(d){var d=d||window.event,e=d.target||d.srcElement,f=e.getAttribute("data-action");f&&(1==++b&&a(document).bind("click",c),h.handle.mouseout&&h.handle.mouseout.apply(e,[d]))}}(),l=function(){return function(a){var a=a||window.event,b=a.target||a.srcElement,c=b.getAttribute("data-action");c&&h.handle.mousemove&&h.handle.mousemove.apply(b,[a])}}();this.df_class={selectedClass:b,optionClass:c,wrapClass:d},this.handle={},this.$el=g,this._op=f,this._id=e++,this.selected=null,this.options=[],this.totals.push(this),this.$el.click(j),this.$el.mouseout(k),this.$el.mousemove(l)}}(),a.MKP._select.prototype=a.extend(new a.MKP._base,{init:function(){var b=this.$el;this.$first=a(b.find("strong")[0]),this.$wrap=a(b.find("ul")[0]),this.options=b.find("a"),this.selected=null},render:function(b){for(var c="",d=this._op,e=this.df_class.optionClass,f=(this.df_class.selectedClass,this.df_class.wrapClass),g=b.data,h=this.$el,i=g.length;i>0;){var j=new d;j.render({id:i,className:e,value:g[--i].value,text:g[i].text}),c+=j.content}return this.content=a.MKP.templateParser(this.template,{first:this.defaultValue,className:f,content:c}),h.html(this.content),this.init(),this},setDefault:function(a){return this.defaultValue=a,this.$first&&this.$first.html(a),this},select:function(b){var c=this.df_class;return a.each(this.options,function(){this.className=this.getAttribute("data-value")==b.value?c.selectedClass:""}),this.$first.html(b.text),this.selected=b,this},setStyle:function(a){return this.df_class={selectedClass:a.selected,optionClass:a.option,wrapClass:a.wrap},this},setTemplate:function(a){this._op.prototype.template=a.option,this._pro.template=a.wrap}}),a.fn.mkpSelection=function(b){if(this[0].mpkSelction)return this[0].mpkSelction;b.data||{};var c=b.handle||{},d=b.defaultValue||"null",e=new a.MKP._select(this);return b.template?e.setTemplate(b.template):e.setTemplate({option:a("#mkpSelectOption").html(),wrap:a("#mkpSelectWrap").html()}),b.style&&e.setStyle(b.style),e.setDefault(d),e.render(b),e.setHandle(c),this[0].mpkSelction=e,e},void 0):(a.error("basic MPKjs is lacked"),void 0)}(jQuery,window),function(a){a||alert("Jquery is needed!"),a.MKP||a.error("basic MPKjs is lacked");var b="mkp_p_wrap",c="mkp_p_pre",d="mkp_p_tips_num",e="mkp_p_next",f="mkp_p_num",g="mkp_p_tips",h="mpk_p_current";a.MKP._pager=function(){var i=0,j=function(){var a=0;return function(){this._id=a++,this.totals.push(this)}}();return j.prototype=new a.MKP._base,function(a){var k=this,l=function(a){var a=a||window.event,b=a.target||a.srcElement,c=b.getAttribute("data-action");if(c){switch(c){case"centerPager":k.setPageCenter(b.getAttribute("data-page")),k.handle.clickPager&&k.handle.clickPager.apply(b,[a]);break;case"pager":k.setPage(b.getAttribute("data-page")),k.handle.clickPager&&k.handle.clickPager.apply(b,[a]);break;case"pre":k.prePage(k.perform),k.handle.pre&&k.handle.pre.apply(b,[a]);break;case"next":k.nextPage(k.perform),k.handle.next&&k.handle.next.apply(b,[a])}k.handle.click&&k.handle.click.apply(b,[a])}};this._pnum=j,this._id=i++,this.df_class={page:f,currentPage:h,wrap:b,pre:c,next:e,tips:g,tipsNum:d},this._pnums=[],this.$el=a,this.$el.click(l),this.totals.push(this)}}(),a.MKP._pager.prototype=a.extend(new a.MKP._base,{init:function(){var a=this.df_class,b=this.$el;this.$pre=b.find("[data-action=pre]"),this.$next=b.find("[data-action=next]"),this.$tips=b.find("."+a.tips),this.$wrap=b.find("."+a.wrap),this.$tipsNum=b.find("."+a.tipsNum),this.pages=this.$wrap.find("[data-action=pager]"),1==this.pages[0].getAttribute("data-page")?this.$pre.hide():this.$pre.show(),this.pages[this.pages.length-1].getAttribute("data-page")==this.totalNum?this.$next.hide():this.$next.show()},_changePage:function(a,b){for(var c=this._pnums,d=this.$wrap,e="";b>a;)e+=c[a++].content;d.html(e),this.init()},setPageCenter:function(b){var b=parseInt(b),c=this.perform;if(0==c%2)a.error("Sorry Don't support even performance!");else{console.log("odd here");var d=(c-1)/2;d+1>=b?(begin=0,end=begin+c,console.log(b+" num here")):(begin=b-d-1,end=begin+c,end>=this.totalNum&&(end=this.totalNum,begin=end-c))}this._changePage(begin,end),this.setPage(b)},prePage:function(a,b){var c=parseInt(this.pages[0].getAttribute("data-page"))-1,b=b||0,d=a||this.perform,e=0>c-d?0:c-d;d>c&&(c=d),this._changePage(e,c),b&&this.setPage(e+1)},nextPage:function(a,b){var c=this.pages,b=b||0,d=c.length,e=parseInt(c[d-1].getAttribute("data-page")),f=a||this.perform,g=e+f<this.totalNum?e+f:this.totalNum;e>g-f&&(e=g-f),this._changePage(e,g),b&&this.setPage(e+1)},setPage:function(b){var c=this.df_class;this.handle.setPager&&this.handle.setPager(b),a.each(this.pages,function(){this.className=c.page,this.getAttribute("data-page")==b&&(this.className=c.currentPage)}),this.$tipsNum.html(b)},setTemplate:function(b){var b=b||{};this._pnum.prototype.template=b.pager||a("#mkpPagerNumber").html(),this._pro.template=b.wrap||a("#mkpPageWrap").html()},setStyle:function(a){return this.df_class={page:a.page||f,currentPage:a.currentPage||h,wrap:a.wrap||b,pre:a.pre||c,next:a.next||e,tips:a.tips||g,tipsNum:a.tipsNumber||d},this},render:function(b){for(var c=b.total,d=this._pnum,e=this.df_class,f=b.perform||5,g=b.defaultValue||1,h=0,i="";h!=c;){var j=new d;j.render({page:++h,className:h!=g?e.page:e.currentPage}),this._pnums.push(j),f>=h&&(i+=j.content)}return this.totalNum=b.total,this.content=a.MKP.templateParser(this.template,{pre:e.pre,next:e.next,total:c,currentPage:g,content:i}),this.perform=f,this.$el.html(this.content),this.init(),this.setPage(g),this}}),a.fn.mkpPager=function(b){if(this[0].mpkPager)return this[0].pager;b.data||{};var c=b.handle||{};b.defaultValue||"null";var d=new a.MKP._pager(this);return d.setHandle(c),d.setTemplate(b.template),b.style&&d.setStyle(b.style),d.render(b),this[0].mpkPager=d,d}}(jQuery,window);